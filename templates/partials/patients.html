<div ng-controller="PatientsController as vm">
    <h3 class="text-muted">Nova guia</h3>
    <div class="row form-group">
        <div class="col-xs-12">
            <ul class="nav nav-pills nav-justified thumbnail setup-panel">
                <li class="active"><a href="#step-1">
                    <h4 class="list-group-item-heading">Passo 1</h4>
                    <p class="list-group-item-text">Selecionar Paciente</p>
                </a></li>
                <li class="disabled"><a href="#step-2" ng-click="$event.preventDefault()">
                    <h4 class="list-group-item-heading">Passo 2</h4>
                    <p class="list-group-item-text">Selecionar Procedimentos</p>
                </a></li>
                <li class="disabled"><a href="#step-3">
                    <h4 class="list-group-item-heading">Passo 3</h4>
                    <p class="list-group-item-text">Gerar Nova Guia</p>
                </a></li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <h4 class="text-muted">Pesquisar Pacientes</h4>
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="form-group">
                        <label for="name">Nome</label>
                        <input type="text" class="form-control" name="name" id="name" placeholder="Informe o nome completo">
                    </div>
                    <div class="form-group">
                        <label for="card_number">Número do Cartão</label>
                        <input type="text" class="form-control" name="card_number" id="card_number" placeholder="Informe o número do cartão">
                    </div>
                    <button class="btn btn-primary pull-right" ng-click="search()"><i class="fa fa-search"></i></button>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <div class="panel panel-default">
        <div class="panel-heading">Lista de Pacientes</div>
            <table class="table">
                <thead>
                    <th>Número do Cartão</th>
                    <th>Nome</th>
                    <th></th>
                </thead>
                <tbody>
                    <tr ng-repeat="patient in patients">
                        <td>{[% patient.id_card_number %]}</td>
                        <td>{[% patient.name %]}</td>
                        <td width="60">
                            <div class="btn-group">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-gear"></i>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="javascript:;" ng-click="open(patient.id)">visualizar</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        </div>
    </div>

    <script type="text/ng-template" id="patientViewModal.html">
        <div class="modal-header">
            <h4 class="modal-title">Dados do Paciente</h4>
        </div>
        <div class="modal-body">
            <p><strong>Número do Cartão: </strong>{[% items[0].id_card_number %]}</p>
            <p><strong>Nome: </strong>{[% items[0].name %]}</p>
        </div>
        <div class="modal-footer">
            <a href="#/step-2" class="btn btn-primary" type="button" ng-click="ok()">Selecionar</a>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button>
        </div>
    </script>
</div>
